# ğŸ“˜ ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ãƒ«ä¸€è¦§ï¼ˆbudget_book - v2.1ï¼‰

---

æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€budget_book ã«ç™»å ´ã™ã‚‹ä¸»è¦ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã€ãã‚Œãã‚Œã®å±æ€§ãƒ»ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ä¸å¤‰æ¡ä»¶ã‚’å®šç¾©ã™ã‚‹ã€‚  
ZodãŠã‚ˆã³TypeScriptå‹ã«åŸºã¥ãæ§‹é€ ã‚’æƒ³å®šã™ã‚‹ã€‚

---

## ğŸ§¾ Entryï¼ˆåæ”¯è¨˜éŒ²ï¼‰

### ç”¨é€” - åæ”¯è¨˜éŒ²

åå…¥ãƒ»æ”¯å‡ºãƒ»å€Ÿå…¥ãƒ»è²¸ä»˜ãƒ»è¿”æ¸ˆãªã©ã€ã™ã¹ã¦ã®é‡‘éŠ­ã®å‹•ãã‚’è¨˜éŒ²ã™ã‚‹åŸºæœ¬å˜ä½ã€‚  
**å€Ÿå…¥ï¼è²¸ä»˜ã¯`Debt`ã¨å¸¸ã«ã‚»ãƒƒãƒˆã§ç”Ÿæˆã•ã‚Œã‚‹ã€‚**

### å±æ€§ - åæ”¯è¨˜éŒ²

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | å‹ | å¿…é ˆ | èª¬æ˜ |
|------------|----|------|------|
| `id` | string (UUID) | âœ” | ä¸€æ„ãªè­˜åˆ¥å­ |
| `type` | 'income' / 'expense' / 'borrow' / 'lend' | âœ” | é‡‘éŠ­ã®æµã‚Œã®ç¨®åˆ¥ |
| `date` | string (ISO date) | âœ” | ç™ºç”Ÿæ—¥ï¼ˆYYYY-MM-DDï¼‰ |
| `amount` | number | âœ” | é‡‘é¡ï¼ˆæ­£ã®æ•°ï¼‰ |
| `method` | string | âœ” | æ”¯æ‰•ã„æ–¹æ³•ï¼ˆå£åº§åãªã©ï¼‰ |
| `category` | string | âœ– | ä»»æ„ã‚«ãƒ†ã‚´ãƒªï¼ˆæ”¯å‡ºï¼åå…¥ã®ã¿ä½¿ç”¨ï¼‰ |
| `memo` | string | âœ– | ä»»æ„ã®ãƒ¡ãƒ¢ |
| `debtId` | string (UUID) | âœ– | å¯¾å¿œã™ã‚‹Debtã®IDï¼ˆå€Ÿå…¥ï¼è²¸ä»˜ï¼è¿”æ¸ˆæ™‚ï¼‰ |

### ä¸å¤‰æ¡ä»¶ - åæ”¯è¨˜éŒ²

- `amount > 0`
- `type`ãŒ`borrow` / `lend`ã®å ´åˆã€`debtId`ã¯å¿…é ˆ
- `type`ãŒ`income` / `expense`ã§`debtId`ãŒã‚ã‚‹å ´åˆã¯è¿”æ¸ˆEntry

---

## ğŸ’³ Debtï¼ˆè²¸å€Ÿç®¡ç†ï¼‰

### ç”¨é€” - è²¸å€Ÿç®¡ç†

å€Ÿå…¥ï¼è²¸ä»˜ã®çŠ¶æ…‹ç®¡ç†ãŠã‚ˆã³é€²æ—ã®å‚ç…§ã€‚

### å±æ€§ - è²¸å€Ÿç®¡ç†

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | å‹ | å¿…é ˆ | èª¬æ˜ |
|------------|----|------|------|
| `id` | string (UUID) | âœ” | ä¸€æ„ãªè­˜åˆ¥å­ |
| `type` | 'borrow' / 'lend' | âœ” | å€Ÿå…¥ or è²¸ä»˜ |
| `entryId` | string (UUID) | âœ” | èµ·ç‚¹ã¨ãªã‚‹Entryã®ID |
| `date` | string (ISO date) | âœ” | ç™ºç”Ÿæ—¥ |
| `amount` | number | âœ” | é‡‘é¡ |
| `counterpart` | string | âœ” | ç›¸æ‰‹ã®åå‰ or è­˜åˆ¥æƒ…å ± |
| `repaidAt` | string (ISO date) | âœ– | è¿”æ¸ˆå®Œäº†æ—¥ï¼ˆã‚ã‚Œã°ï¼‰ |
| `memo` | string | âœ– | ä»»æ„ã®å‚™è€ƒ |

### ä¸å¤‰æ¡ä»¶ - è²¸å€Ÿç®¡ç†

- `amount > 0`
- `entryId`ã®`type`ã¯`borrow`ã¾ãŸã¯`lend`ã§ã‚ã‚‹ã“ã¨
- `repaidAt`ãŒã‚ã‚‹å ´åˆã€`date <= repaidAt`

---

## ğŸ’° Methodï¼ˆæ”¯æ‰•ã„æ‰‹æ®µï¼‰

### ç”¨é€” - æ”¯æ‰•ã„æ‰‹æ®µ

å£åº§ã€ç¾é‡‘ã€é›»å­ãƒãƒãƒ¼ãªã©ã€æ”¯æ‰•ã„æ‰‹æ®µã‚’è¡¨ã™ã€‚

### å±æ€§ - æ”¯æ‰•ã„æ‰‹æ®µ

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | å‹ | å¿…é ˆ | èª¬æ˜ |
|------------|----|------|------|
| `id` | string | âœ” | ä¸€æ„ãªè­˜åˆ¥å­ï¼ˆåå‰ã§ä»£ç”¨ã‚‚å¯ï¼‰ |
| `name` | string | âœ” | è¡¨ç¤ºå |
| `initialBalance` | number | âœ– | åˆæœŸæ®‹é«˜ï¼ˆã‚ã‚Œã°ï¼‰ |
| `archived` | boolean | âœ– | ä½¿ç”¨åœæ­¢ãƒ•ãƒ©ã‚° |

---

## ğŸ“Š Reportï¼ˆæœˆæ¬¡ãƒ¬ãƒãƒ¼ãƒˆï¼‰

### ç”¨é€” - æœˆæ¬¡ãƒ¬ãƒãƒ¼ãƒˆ

æœˆå˜ä½ã®åæ”¯é›†è¨ˆã€methodåˆ¥è³‡ç”£æ¨ç§»ã€ã‚«ãƒ†ã‚´ãƒªåˆ¥æ”¯å‡ºå‰²åˆãªã©ã‚’è¡¨ç¤ºã€‚

### å±æ€§ï¼ˆé›†è¨ˆç”¨ãƒ¢ãƒ‡ãƒ«ï¼‰

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | å‹ | èª¬æ˜ |
|------------|----|------|
| `month` | string (YYYY-MM) | å¯¾è±¡æœˆ |
| `totalIncome` | number | æœˆã®ç·åå…¥ |
| `totalExpense` | number | æœˆã®ç·æ”¯å‡º |
| `net` | number | æœˆã®åæ”¯å·®åˆ† |
| `methodBalances` | Record<method, number> | æœˆæœ«æ™‚ç‚¹ã®methodåˆ¥æ®‹é«˜ |
| `categoryBreakdown` | Record<category, number> | æ”¯å‡ºã‚«ãƒ†ã‚´ãƒªåˆ¥åˆè¨ˆ |

---

## ğŸ”” NotificationRuleï¼ˆé€šçŸ¥è¨­å®šï¼‰

### ç”¨é€” - é€šçŸ¥è¨­å®š

LINE Notifyã‚„ãƒ–ãƒ©ã‚¦ã‚¶é€šçŸ¥ãªã©ã€ã‚¤ãƒ™ãƒ³ãƒˆã«å¿œã˜ãŸé€šçŸ¥ãƒ«ãƒ¼ãƒ«ã€‚

### å±æ€§ - é€šçŸ¥è¨­å®š

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | å‹ | å¿…é ˆ | èª¬æ˜ |
|------------|----|------|------|
| `id` | string | âœ” | é€šçŸ¥ãƒ«ãƒ¼ãƒ«ID |
| `event` | string | âœ” | é€šçŸ¥ã‚¤ãƒ™ãƒ³ãƒˆåï¼ˆ"debt_due", "monthly_summary"ãªã©ï¼‰ |
| `channel` | 'line' / 'push' / 'google' | âœ” | é€šçŸ¥å…ˆ |
| `timing` | 'immediate' / 'daily' / 'monthly' | âœ” | é€šçŸ¥ã‚¿ã‚¤ãƒŸãƒ³ã‚° |

---

## ğŸ—‚ï¸ ãã®ä»–è£œåŠ©ãƒ‰ãƒ¡ã‚¤ãƒ³ï¼ˆã‚«ãƒ†ã‚´ãƒªãªã©ï¼‰

- **Category**  
  - `id: string`, `name: string`, `type: 'income' | 'expense'`
  - UIç·¨é›†å¯èƒ½ãƒ»å‹ã®åˆ¶é™ã‚ã‚Š
- **UserSettingï¼ˆå°†æ¥çš„ãªå¤šæ©Ÿèƒ½åŒ–ç”¨ï¼‰**  
  - `preferredNotification`, `defaultMethod`, `LLMAssistantEnabled` ãªã©

---

ä»¥ä¸ŠãŒç¾æ™‚ç‚¹ã§ã®ãƒ‰ãƒ¡ã‚¤ãƒ³å®šç¾©ã§ã‚ã‚‹ã€‚
